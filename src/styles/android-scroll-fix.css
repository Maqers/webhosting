/**
 * ANDROID SCROLLING FIXES
 * 
 * Critical fixes for Android device scrolling issues
 * - Enables proper touch scrolling on Android browsers
 * - Fixes touch-action properties
 * - Removes user-select restrictions that block scrolling
 * - Ensures overflow properties allow scrolling
 */

/* ============================================================================
   ANDROID TOUCH SCROLLING - CRITICAL FIX
   ============================================================================ */

/* Detect Android devices (not iOS) */
@media (max-width: 768px) {
  /* GLOBAL SCROLL RESET FOR ANDROID */
  html {
    overflow-y: auto !important;
    overflow-x: hidden !important;
    height: 100% !important;
    width: 100% !important;
    position: relative !important;
    touch-action: pan-y !important;
    -ms-touch-action: pan-y !important;
    scroll-behavior: smooth !important;
  }

  body {
    overflow-y: auto !important;
    overflow-x: hidden !important;
    min-height: 100% !important;
    height: auto !important;
    width: 100% !important;
    position: static !important; /* Critical: allows document to scroll on Android */
    touch-action: pan-y !important;
    -ms-touch-action: pan-y !important;
    -webkit-overflow-scrolling: touch !important;
  }

  /* Root containers must allow scrolling */
  #root,
  .App {
    overflow-y: visible !important; /* Let body handle scroll */
    overflow-x: hidden !important;
    min-height: 100vh !important;
    height: auto !important;
    width: 100% !important;
    position: relative !important;
    touch-action: pan-y !important;
    -ms-touch-action: pan-y !important;
  }

  /* Ensure all scrollable containers work */
  .home,
  .products-page,
  .about-us,
  .contact-page,
  .faqs-page,
  .seller-page,
  .categories-page,
  .product-detail,
  .container,
  section,
  .section,
  main,
  article {
    touch-action: pan-y !important;
    -ms-touch-action: pan-y !important;
    overflow-y: visible !important;
    overflow-x: hidden !important;
    height: auto !important;
    width: 100% !important;
    max-width: 100% !important;
  }

  /* Product detail: when image is NOT zoomed, ensure container never blocks page scroll. */
  .product-detail .main-image-container:not(.is-zoomed) {
    touch-action: pan-y !important;
    -ms-touch-action: pan-y !important;
  }
}

/* ============================================================================
   REMOVE USER-SELECT RESTRICTIONS
   ============================================================================ */

@media (max-width: 768px) {
  /* Allow text selection; do NOT set pointer-events on * (breaks modals) */
  p, h1, h2, h3, h4, h5, h6, span, li {
    -webkit-user-select: text !important;
    user-select: text !important;
  }

  button,
  .navbar-toggle,
  .whatsapp-button {
    -webkit-user-select: none !important;
    user-select: none !important;
  }
}

/* ============================================================================
   ANDROID TOUCH-ACTION FIXES
   ============================================================================ */

@media (max-width: 768px) {
  /* touch-action for interactive elements set in mobile-scroll-priority.css
     (links use pan-y for smooth scroll; buttons/inputs use manipulation) */

  /* Images: allow pan and pinch */
  img {
    touch-action: pan-y pinch-zoom !important;
    -ms-touch-action: pan-y pinch-zoom !important;
  }
  
  /* Horizontal scroll containers */
  .category-filters,
  .sub-navbar-container,
  .products-grid,
  [style*="overflow-x: auto"],
  [class*="scroll-x"] {
    overflow-x: auto !important;
    overflow-y: hidden !important;
    touch-action: pan-x pan-y !important;
    -webkit-overflow-scrolling: touch !important;
  }
}

/* ============================================================================
   PREVENT POSITION: FIXED LOCKOUT (ANDROID)
   Ensure NOTHING can permanently lock page scroll on small devices.
   ============================================================================ */

@media (max-width: 768px) {
  /* Always allow vertical scrolling on Android */
  body {
    position: static !important;
    width: 100% !important;
    overflow-y: auto !important;
    overflow-x: hidden !important;
    touch-action: pan-y !important;
    -ms-touch-action: pan-y !important;
  }

  /* Even when mobile menu or sort modal is open, do NOT lock body scroll.
     Menus/modals themselves stay fixed via their own CSS. */
  body.menu-open,
  body.sort-modal-open {
    position: static !important;
    width: 100% !important;
    overflow-y: auto !important;
    overflow-x: hidden !important;
  }
}
